---
id: filler
---

import Balance from "../../components/Balance";

# Filler

In Garden's order book system, a "filler" or "counterparty" plays a crucial role in facilitating efficient swaps. Fillers are market participants who provide liquidity by executing orders immediately after matching them according to specific strategies. The order book oversees the matching process by creating an auction for filling the orders, ensuring continuous trading activity and maintaining market efficiency. Unlike makers, who provide passive liquidity, fillers are always online and enable near-instant trading by executing the necessary actions to upgrade the order status to the next state. Understanding the function and impact of fillers is essential for grasping the dynamics of order execution and liquidity within our system.

This doc provides a comprehensive guide to fillers, including their roles, responsibilities, and the process of becoming a filler. This guide also covers the market-making auction mechanism, which allows fillers to compete for the right to fill an order. By participating in the auction, fillers can enhance their reputation and increase their chances of being selected to fill orders. Garden's order book system is designed to ensure that fillers play a vital role in maintaining market efficiency and liquidity, contributing to the overall success of the ecosystem.

## Who can become a Filler?

One can become a filler by staking 210,000 $SEED tokens in the garden staking system. The staking system is a governance system that allows users to stake $SEED tokens to participate in the staking of the garden ecosystem. The staking system also allows users to earn rewards for staking their tokens by electing a filler. All the voters of a filler will receive a portion of the trading fees generated by the filler proportionate to the number of votes they have cast for the filler.
  
*More about staking and governance can be found in the [staking blog post](https://garden.finance/blogs/staking-is-live/).*

## How to run a Filler?

COBi is a market-making bot that plays the role of a filler in the garden ecosystem. COBi is designed to fill orders in the orderbook and facilitate trading by providing liquidity to the system. COBi is an automated trading bot that executes trades based on predefined strategies and parameters. COBi is integrated with the orderbook AMM and interacts with the orderbook to fill orders and initiate trades. COBi is designed to be fast, efficient, and reliable, ensuring that orders are filled quickly and accurately.

Anyone with a filler role in the garden staking system can maintain COBi. As a filler, COBi plays a crucial role in the garden ecosystem by ensuring that the orderbook is always ready to fill orders quickly and ensure the trading process is successful. 

Fillers can add liquidity of any proportions to the wallet generated by COBi which is used to fill the orders. The liquidity can be added in any supported token by the orderbook on supported chains. The liquidity will be directly used by COBi to fill the orders and initiate trades thus ensuring non-custodial liquidity provision. The liquidity can be added or removed at any time by the filler. COBi also provides a GUI to manage and monitor the liquidity.

COBi can be deployed on a local or a remote machine using the latest Docker image. The Docker image contains all the necessary dependencies and configurations to run COBi smoothly. To deploy COBi, refer to the [COBi Setup](https://github.com/catalogfi/cobi/tree/feat/readme?tab=readme-ov-file#setup)

## How to design strategies?

Strategies are the rules and parameters that define how COBi fills orders. Strategy are strictly enforced by COBi before filling an order. The strategies are designed to ensure that COBi fills orders quickly to maximize the chances of a successful trade thus also ensuring that the liquidity is used efficiently to produce better APY via fees. Strategies can be customized based on the market conditions, trading volume, and other factors that may affect the trading process. COBi allows fillers to define and configure strategies based on their preferences and requirements. The strategy used by COBi is abstracted for the auction mechanism which follows its own rules to select the best filler to fill the order, ensuring that the makers get the best price for their orders and to ensure impartial opportunity for all fillers to utilize their liquidity. To design profitable strategies, fillers must consider hoe market making auction works and how the orderbook selects the best filler to fill the order.

### Market Making Auctions

The garden ecosystem houses a auction mechanism which is a process that allows fillers to compete for their right to fill an order. The auction is initiated when an order is placed in the orderbook. Fillers submit their bids to fill the order, and the orderbook selects the best bid based on the price and other criteria. The selected filler then fills the order and initiates the trade.

Orderbook acts as the auctioneer and selects the best filler based on the following criteria:

- **Price:** The filler with the best price is selected to fill the order. The price is the ratio of the tokens in the maker request to the tokens in the filler offer. The orderbook selects the filler with the best price to ensure that the maker gets the best price for their order. In
- **Number of votes in the staking system:** The filler with the most votes in the staking system is prioritized. Votes are cast by users who stake $SEED tokens to participate in the staking system to elect a filler and tap into the trading fees generated by the filler. Votes can translate to reputation and influence the selection process. User in staking system can transfer their votes to other filler on will.
- **Reputation Score:** The filler's reputation score is calculated based on their past performance and success rate in completing filled trades. This score is public and allows new user in the staking system to evaluate the filler's performance and reliability.
  
*More about market making can be found in the [market making blog post](https://garden.finance/blogs/market-making-and-staking/).*

### Example Strategies

These are some of the strategies that were experimented by fillers in the garden ecosystem:

1. **Minimun price strategy:** This strategy involves setting a minimum price for the order to ensure that the order is filled provided the price is above the that price provided enough liquidity exists. Price strategy is simple and ensure consistent returns considering that impermanent loss is not a concern (which is true to a good extent in the markets for wrapped bitcoin). This strategy can be enabled in COBi by setting the minimum price parameter in the configuration file.

2. **Arbitrage Strategy:** This strategy involves identifying fiat price differences between different exchanges and taking advantage of these differences to make a profit. The filler can use this strategy to fill orders at a lower price and sell them at a higher price or buying at lower price and swapping at an acceptable price in the garden ecosystem, generating an arbitrage profit in the process. This can enabled in COBi by using adapter built for centralized and decentralized exchanges to fetch the prices and fill the orders.
   
3. **Liquidity Impact Strategy:** This strategy involves analyzing the current liquidity in the orderbook and adjusting the price by increasing it if the liquidity in the requested direction is low. This strategy will also help in reducing the slippage and ensuring that the order is filled quickly. This can be enabled in COBi by using the orderbook API to fetch the liquidity and adjusting the price based on the liquidity. It is also a good strategy to increase the reputation score in the auction system.

4. **Volume Impact Strategy:** This strategy involves analyzing the current trading volume and adjusting the price by decreasing it if the trading volume is high. This strategy will ensure better chances of filling the order and generating more fees though volume. This strategy can be combined any other strategy.

5. **Reputation Impact Strategy:** This strategy involves analyzing the reputation score of the filler and adjusting the price only to target the reputation score. This strategy will help in increasing the chances of being selected in the auction system for more orders in the future.

6. **AMM Strategy:** When avoiding impermanent loss is a concern, fillers can use AMM strategy on their own reserves to fill the orders. Fillers can choose from the widely researched AMM strategies like constant product, constant sum, constant mean, etc. to fill the orders. This strategy can be enabled in COBi by using the AMM adapter to fill the orders.

7. **Custom Strategy:** This strategy involves designing a custom strategy based on the market conditions, trading volume, and other factors that may affect the trading process. Fillers can customize the strategy based on their preferences and requirements to maximize the chances of a successful trade. More strategies wil be added here as they are experimented by fillers.

## Fees and APY

Fees in the swaps are generated by the filler by increasing the price of the order. Price is the ratio in tokens in maker request to filler offer. The difference between the price set by the filler and the current market price is the fee. Fee is collected in destination token.Garden also allows the makers to pay in $SEED tokens to reduce the fee or nullify fee thus providing trading utility to the $SEED token.

The fee is collected by the filler and is used to pay the gas fees and other expenses. A part of it is also used to pay the voters of the filler in the staking system. 

The APY of the filler is calculated based on the fees generated by the filler and the liquidity provided by the filler. The APY is calculated as the ratio of the fees generated by the filler to the liquidity provided by the filler. The APY of stakers is calculated based on the fees generated by the filler and the number of votes cast by the stakers for the filler. 


## Current Fillers

Address : [0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635](https://etherscan.io/address/0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635)

Reputation score : 100

Fee generate : $1.5M

Fee distributed:  $500k

Ethereum  WBTC reserves : [<Balance chain="ethereum" address="0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635" token="0x2260fac5e5542a773aa44fbcfedf7c193bc2c599"/>](https://etherscan.io/token/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599?a=0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635)

Arbitrum WBTC reserves : [<Balance chain="arbitrum" address="0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635" token="0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f"/>](https://arbiscan.io/token/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f?a=0x9dd9c2d208b07bf9a4ef9ca311f36d7185749635)

Bitcoin reserves : [<Balance chain="bitcoin" address="bc1qhww67feqfdf6xasjat88x5stqa6vzx0c6fgtnj"/>](https://mempool.space/address/bc1qhww67feqfdf6xasjat88x5stqa6vzx0c6fgtnj)

Strategy : Minimum price strategy with fee set at 30 bips of initial amount


